<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>//global
bool fogo=false;
bool bomba=false;

//brassagem
bool ingredientes=false;
bool misturou=false;

//canais brassagem
chan add_ingrid;
broadcast chan bem_misturado;
broadcast chan end_control;
chan iodoOK;

//canais recirculacao
chan UserSedimento,sedimentoOK,PanelaCheia;

//canais lavagem
chan Lavagem_Bomba;

//canais fervura
chan adicionado15g,addRestante;

//canais sensor
chan sensorON,sensorOFF,tempMAX,tempMIN;

//FIM PROCESSOS
broadcast chan FIMbrassagem;
broadcast chan FIMrecirculacao;
broadcast chan FIMlavagem;
broadcast chan FIMfervura;

//reiniciar sistema
urgent broadcast chan Reiniciar;</declaration><template><name x="0" y="0">Brassagem</name><declaration>// Place local declarations here.
clock time;</declaration><location id="id0" x="-4096" y="-728" color="#ff0000"><name x="-4176" y="-736">ERROR</name></location><location id="id1" x="-4424" y="-576" color="#00ffff"><name x="-4464" y="-576">Fim</name></location><location id="id2" x="-4056" y="-576"><name x="-4072" y="-560">T75G</name></location><location id="id3" x="-4264" y="-576"></location><location id="id4" x="-3888" y="-576"><name x="-3920" y="-560">Iodo_OK</name></location><location id="id5" x="-3744" y="-576" color="#ffff00"><name x="-3728" y="-592">aguarda_iodo</name></location><location id="id6" x="-3744" y="-856"><name x="-3728" y="-872">wait</name><label kind="invariant" x="-3728" y="-856">time&lt;=60</label></location><location id="id7" x="-4424" y="-856"><name x="-4456" y="-888">Inicio</name></location><location id="id8" x="-3888" y="-856" color="#ffff00"><name x="-3920" y="-888">Misturar</name></location><location id="id9" x="-4072" y="-856" color="#ffff00"><name x="-4104" y="-888">add_ing</name></location><location id="id10" x="-4296" y="-856"><name x="-4312" y="-896">T70G</name></location><init ref="id7"/><transition><source ref="id3"/><target ref="id0"/></transition><transition><source ref="id2"/><target ref="id0"/></transition><transition><source ref="id4"/><target ref="id0"/></transition><transition><source ref="id5"/><target ref="id0"/></transition><transition><source ref="id6"/><target ref="id0"/></transition><transition><source ref="id8"/><target ref="id0"/></transition><transition><source ref="id9"/><target ref="id0"/></transition><transition><source ref="id10"/><target ref="id0"/></transition><transition><source ref="id1"/><target ref="id7"/><label kind="synchronisation" x="-4552" y="-720">Reiniciar?</label><nail x="-4480" y="-576"/><nail x="-4480" y="-856"/></transition><transition><source ref="id3"/><target ref="id1"/><label kind="synchronisation" x="-4392" y="-576">FIMbrassagem!</label></transition><transition><source ref="id2"/><target ref="id3"/><label kind="synchronisation" x="-4192" y="-576">tempMAX?</label><label kind="assignment" x="-4192" y="-560">fogo:=false</label></transition><transition><source ref="id4"/><target ref="id2"/><label kind="synchronisation" x="-4000" y="-576">sensorON!</label><label kind="assignment" x="-4000" y="-560">fogo:=true</label></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-3840" y="-576">iodoOK?</label></transition><transition><source ref="id6"/><target ref="id5"/><label kind="guard" x="-3736" y="-712">time&gt;=60</label><label kind="synchronisation" x="-3736" y="-728">end_control!</label></transition><transition><source ref="id8"/><target ref="id6"/><label kind="synchronisation" x="-3856" y="-904">bem_misturado?</label><label kind="assignment" x="-3856" y="-888">fogo=false,
time:=0</label></transition><transition><source ref="id7"/><target ref="id10"/><label kind="synchronisation" x="-4392" y="-888">sensorON!</label><label kind="assignment" x="-4392" y="-872">fogo:=true</label></transition><transition><source ref="id9"/><target ref="id8"/><label kind="synchronisation" x="-4024" y="-888">add_ingrid?</label><label kind="assignment" x="-4024" y="-872">bomba=true</label></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-4232" y="-888">tempMAX?</label><label kind="assignment" x="-4240" y="-872">bomba=false</label></transition></template><template><name>Recirculacao</name><location id="id11" x="-424" y="-272" color="#ff0000"><name x="-448" y="-256">ERROR</name></location><location id="id12" x="-120" y="-384" color="#00ffff"><name x="-130" y="-414">Fim</name></location><location id="id13" x="-320" y="-384" color="#ffff00"><name x="-368" y="-424">sedimento_OK</name></location><location id="id14" x="-536" y="-384" color="#ffff00"><name x="-592" y="-424">inicio_sedimento</name></location><location id="id15" x="-768" y="-384"><name x="-778" y="-414">Inicio</name></location><init ref="id15"/><transition><source ref="id13"/><target ref="id11"/><nail x="-320" y="-368"/><nail x="-320" y="-312"/></transition><transition><source ref="id14"/><target ref="id11"/><nail x="-536" y="-312"/></transition><transition><source ref="id12"/><target ref="id15"/><label kind="synchronisation" x="-472" y="-200">Reiniciar?</label><nail x="-120" y="-200"/><nail x="-768" y="-200"/></transition><transition><source ref="id13"/><target ref="id12"/><label kind="synchronisation" x="-264" y="-400">FIMrecirculacao!</label></transition><transition><source ref="id14"/><target ref="id13"/><label kind="synchronisation" x="-472" y="-408">sedimentoOK?</label></transition><transition><source ref="id15"/><target ref="id14"/><label kind="synchronisation" x="-696" y="-400">FIMbrassagem?</label></transition></template><template><name>Lavagem</name><declaration>clock panela2;</declaration><location id="id16" x="-1008" y="-128" color="#ff0000"><name x="-992" y="-136">ERROR</name></location><location id="id17" x="-840" y="-208" color="#00ffff"><name x="-850" y="-238">Fim</name></location><location id="id18" x="-1008" y="-208" color="#ffff00"><name x="-1040" y="-240">Transfere</name></location><location id="id19" x="-1176" y="-208"><name x="-1216" y="-240">Inicio</name></location><init ref="id19"/><transition><source ref="id18"/><target ref="id16"/></transition><transition><source ref="id17"/><target ref="id19"/><label kind="synchronisation" x="-1040" y="-64">Reiniciar?</label><nail x="-840" y="-64"/><nail x="-1176" y="-64"/></transition><transition><source ref="id18"/><target ref="id17"/><label kind="synchronisation" x="-968" y="-224">FIMlavagem?</label></transition><transition><source ref="id19"/><target ref="id18"/><label kind="synchronisation" x="-1160" y="-224">FIMrecirculacao?</label></transition></template><template><name>Fervura</name><declaration>clock time;
clock global_time;</declaration><location id="id20" x="-320" y="-136" color="#ff0000"><name x="-344" y="-112">ERROR</name></location><location id="id21" x="48" y="-312" color="#00ffff"><name x="64" y="-320">Fim</name></location><location id="id22" x="-96" y="-312"><name x="-112" y="-360">wait5</name><label kind="invariant" x="-112" y="-344">time&lt;=5</label></location><location id="id23" x="-272" y="-312"><name x="-304" y="-344">add_resto</name></location><location id="id24" x="-376" y="-312"><name x="-392" y="-360">wait55</name><label kind="invariant" x="-352" y="-312">time&lt;=55</label></location><location id="id25" x="-584" y="-312" color="#ffff00"><name x="-616" y="-344">adicione15g</name></location><location id="id26" x="-728" y="-312"><name x="-738" y="-342">Inicio</name></location><init ref="id26"/><transition><source ref="id23"/><target ref="id20"/><nail x="-272" y="-288"/><nail x="-272" y="-184"/></transition><transition><source ref="id24"/><target ref="id20"/><nail x="-376" y="-192"/></transition><transition><source ref="id22"/><target ref="id20"/><nail x="-96" y="-168"/></transition><transition><source ref="id25"/><target ref="id20"/><nail x="-584" y="-184"/></transition><transition><source ref="id21"/><target ref="id26"/><label kind="synchronisation" x="-360" y="-64">Reiniciar?</label><nail x="48" y="-72"/><nail x="-728" y="-72"/></transition><transition><source ref="id22"/><target ref="id21"/><label kind="guard" x="-48" y="-352">time&gt;=5</label><label kind="synchronisation" x="-56" y="-336">FIMfervura!</label><label kind="assignment" x="-48" y="-312">fogo=false</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="-224" y="-328">addRestante!</label><label kind="assignment" x="-217" y="-311">time:=0</label></transition><transition><source ref="id24"/><target ref="id23"/><label kind="guard" x="-396" y="-344">time&gt;=55</label><label kind="assignment" x="-352" y="-296">time:=0</label></transition><transition><source ref="id25"/><target ref="id24"/><label kind="synchronisation" x="-520" y="-336">adicionado15g!</label><label kind="assignment" x="-504" y="-312">time:=0,
global_time:=0</label></transition><transition><source ref="id26"/><target ref="id25"/><label kind="synchronisation" x="-704" y="-336">FIMlavagem?</label><label kind="assignment" x="-696" y="-312">fogo=true</label></transition></template><template><name>Sensor</name><location id="id27" x="-1808" y="-336"><name x="-1832" y="-320">Esfriando</name><committed/></location><location id="id28" x="-1808" y="-456"><name x="-1848" y="-488">Aquecendo</name><committed/></location><location id="id29" x="-1696" y="-400"><name x="-1680" y="-408">standby</name></location><location id="id30" x="-1920" y="-400"><name x="-1976" y="-408">Ligado</name></location><init ref="id29"/><transition><source ref="id27"/><target ref="id29"/><label kind="synchronisation" x="-1784" y="-352">tempMIN!</label></transition><transition><source ref="id30"/><target ref="id27"/><label kind="guard" x="-1904" y="-352">fogo==false</label></transition><transition><source ref="id28"/><target ref="id29"/><label kind="synchronisation" x="-1776" y="-464">tempMAX!</label></transition><transition><source ref="id30"/><target ref="id28"/><label kind="guard" x="-1904" y="-464">fogo==true</label></transition><transition><source ref="id30"/><target ref="id29"/><label kind="synchronisation" x="-1840" y="-288">Reiniciar?</label><nail x="-1920" y="-288"/><nail x="-1696" y="-288"/></transition><transition><source ref="id30"/><target ref="id29"/><label kind="synchronisation" x="-1840" y="-520">sensorOFF?</label><nail x="-1920" y="-504"/><nail x="-1696" y="-504"/></transition><transition><source ref="id29"/><target ref="id30"/><label kind="synchronisation" x="-1840" y="-416">sensorON?</label></transition></template><template><name>User</name><declaration>clock time;
int vezes=0;</declaration><location id="id31" x="-1000" y="-592" color="#ff0000"></location><location id="id32" x="-1104" y="-144" color="#00ffff"><name x="-1088" y="-160">Fim</name></location><location id="id33" x="-1424" y="-144"></location><location id="id34" x="-1616" y="-144"><name x="-1672" y="-136">add_resto</name></location><location id="id35" x="-1408" y="-240"><name x="-1392" y="-256">panela_cheia</name></location><location id="id36" x="-1616" y="-240"><name x="-1640" y="-224">transfere</name></location><location id="id37" x="-1408" y="-368"><name x="-1392" y="-376">SedimentoOK</name></location><location id="id38" x="-1616" y="-368"><name x="-1656" y="-360">Sedimento</name></location><location id="id39" x="-1072" y="-512"><name x="-1120" y="-528">testa</name></location><location id="id40" x="-976" y="-512"><name x="-960" y="-520">IodoOk</name></location><location id="id41" x="-1184" y="-512"><name x="-1216" y="-560">espera</name><label kind="invariant" x="-1216" y="-496">time&lt;=15</label></location><location id="id42" x="-1344" y="-512"></location><location id="id43" x="-1520" y="-512"><name x="-1552" y="-552">misturar</name></location><location id="id44" x="-1704" y="-512"><name x="-1720" y="-560">Inicio</name></location><init ref="id44"/><transition><source ref="id39"/><target ref="id31"/><label kind="guard" x="-984" y="-608">vezes&gt;=4</label></transition><transition><source ref="id36"/><target ref="id36"/><label kind="synchronisation" x="-1816" y="-264">Lavagem_Bomba?</label><nail x="-1696" y="-312"/><nail x="-1696" y="-192"/></transition><transition><source ref="id32"/><target ref="id44"/><label kind="synchronisation" x="-1792" y="-536">Reiniciar?</label><nail x="-1104" y="-104"/><nail x="-1824" y="-104"/><nail x="-1824" y="-512"/></transition><transition><source ref="id33"/><target ref="id32"/><label kind="synchronisation" x="-1312" y="-168">FIMfervura?</label></transition><transition><source ref="id34"/><target ref="id33"/><label kind="synchronisation" x="-1552" y="-168">addRestante?</label></transition><transition><source ref="id35"/><target ref="id34"/><label kind="synchronisation" x="-1400" y="-216">adicionado15g?</label><nail x="-1408" y="-192"/><nail x="-1616" y="-192"/></transition><transition><source ref="id36"/><target ref="id35"/><label kind="synchronisation" x="-1544" y="-264">FIMlavagem!</label></transition><transition><source ref="id37"/><target ref="id36"/><label kind="synchronisation" x="-1400" y="-336">FIMrecirculacao?</label><nail x="-1408" y="-304"/><nail x="-1616" y="-304"/></transition><transition><source ref="id40"/><target ref="id38"/><label kind="synchronisation" x="-960" y="-464">FIMbrassagem?</label><nail x="-976" y="-416"/><nail x="-1616" y="-416"/></transition><transition><source ref="id38"/><target ref="id37"/><label kind="synchronisation" x="-1568" y="-392">sedimentoOK!</label></transition><transition><source ref="id39"/><target ref="id41"/><label kind="guard" x="-1064" y="-472">vezes&lt;4</label><label kind="assignment" x="-1120" y="-448">time:=0</label><nail x="-1072" y="-448"/></transition><transition><source ref="id41"/><target ref="id39"/><label kind="guard" x="-1120" y="-608">time&gt;=15</label><label kind="assignment" x="-1176" y="-576">vezes++</label><nail x="-1072" y="-592"/><nail x="-1072" y="-528"/></transition><transition><source ref="id39"/><target ref="id40"/><label kind="guard" x="-1056" y="-512">vezes&lt;4</label><label kind="synchronisation" x="-1040" y="-544">iodoOK!</label></transition><transition><source ref="id42"/><target ref="id41"/><label kind="synchronisation" x="-1312" y="-544">end_control?</label><label kind="assignment" x="-1296" y="-512">time:=0</label></transition><transition><source ref="id43"/><target ref="id42"/><label kind="synchronisation" x="-1472" y="-544">bem_misturado!</label><label kind="assignment" x="-1472" y="-512">misturou=true</label></transition><transition><source ref="id44"/><target ref="id43"/><label kind="synchronisation" x="-1656" y="-544">add_ingrid!</label><label kind="assignment" x="-1672" y="-512">ingredientes=true</label></transition></template><template><name>Controlador</name><location id="id45" x="-464" y="-64" color="#00ffff"><name x="-474" y="-94">Fim</name></location><location id="id46" x="-768" y="0"><committed/></location><location id="id47" x="-768" y="-128"><committed/></location><location id="id48" x="-928" y="-64"><committed/></location><location id="id49" x="-592" y="-64"><committed/></location><location id="id50" x="-768" y="-64"></location><location id="id51" x="-1072" y="-64"><name x="-1112" y="-88">Inicio</name></location><init ref="id51"/><transition><source ref="id45"/><target ref="id51"/><label kind="synchronisation" x="-768" y="80">Reiniciar?</label><nail x="-464" y="80"/><nail x="-1072" y="80"/></transition><transition><source ref="id49"/><target ref="id45"/><label kind="synchronisation" x="-576" y="-96">sensorOFF!</label></transition><transition><source ref="id46"/><target ref="id50"/><label kind="synchronisation" x="-752" y="0">sensorON!</label><label kind="assignment" x="-752" y="16">fogo:=true,
bomba:=true</label><nail x="-720" y="0"/></transition><transition><source ref="id50"/><target ref="id46"/><label kind="synchronisation" x="-864" y="16">tempMIN?</label><nail x="-832" y="0"/></transition><transition><source ref="id47"/><target ref="id50"/><label kind="synchronisation" x="-752" y="-192">sensorON!</label><label kind="assignment" x="-752" y="-176">fogo:=false,
bomba:=false</label><nail x="-704" y="-128"/></transition><transition><source ref="id50"/><target ref="id47"/><label kind="synchronisation" x="-864" y="-160">tempMAX?</label><nail x="-832" y="-128"/></transition><transition><source ref="id48"/><target ref="id50"/><label kind="synchronisation" x="-896" y="-96">sensorON!</label></transition><transition><source ref="id51"/><target ref="id48"/><label kind="synchronisation" x="-1056" y="-96">bem_misturado?</label></transition><transition><source ref="id50"/><target ref="id49"/><label kind="synchronisation" x="-704" y="-96">end_control?</label><label kind="assignment" x="-704" y="-64">fogo:=false,
bomba:=false</label></transition></template><template><name>Geral</name><location id="id52" x="448" y="-152"><name x="448" y="-184">Fim</name></location><location id="id53" x="344" y="-152"><name x="320" y="-200">Fervura</name></location><location id="id54" x="216" y="-152"><name x="192" y="-200">Lavagem</name></location><location id="id55" x="80" y="-152"><name x="32" y="-200">Recirculacao</name></location><location id="id56" x="-72" y="-152"><name x="-112" y="-200">Brassagem</name></location><init ref="id56"/><transition><source ref="id52"/><target ref="id56"/><label kind="synchronisation" x="136" y="-104">Reiniciar!</label><label kind="assignment" x="128" y="-88">fogo:=false,
bomba:=false,
ingredientes:=false,
misturou:=false</label><nail x="448" y="-104"/><nail x="-72" y="-104"/></transition><transition><source ref="id53"/><target ref="id52"/><label kind="synchronisation" x="360" y="-176">FIMfervura?</label></transition><transition><source ref="id54"/><target ref="id53"/><label kind="synchronisation" x="232" y="-176">FIMlavagem?</label></transition><transition><source ref="id55"/><target ref="id54"/><label kind="synchronisation" x="88" y="-176">FIMrecirculacao?</label></transition><transition><source ref="id56"/><target ref="id55"/><label kind="synchronisation" x="-48" y="-176">FIMbrassagem?</label></transition></template><system>// List one or more processes to be composed into a system.
system Sensor,Controlador,Brassagem,Recirculacao,Lavagem,Fervura,User,Geral;</system></nta>